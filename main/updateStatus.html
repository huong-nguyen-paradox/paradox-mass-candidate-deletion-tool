<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link
        href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
        rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="js/api.js"></script>
</head>

<body>
    <header id="app-header" class="app-header">
        <div id="header-div" class="header-div">
            <img src="/main/images/logo-paradox-olivia.png" alt="Paradox Logo" class="logo">
        </div>
    </header>
    
    <div class="body-container">

        <div class="header-container">
            <div class="button-w-text">
                <a class="btn-floating btn-large waves-effect waves-light paradox-primary-btn" href="/main/">
                    <i class="material-icons">navigate_before</i> 
                </a>
                <p>Back</p>
            </div>
            <h1>
                Update Candidate Status Tool
            </h1>
        </div>

        <div class="row">
            <div class="input-field col s6">
                <select id="apiInstance">
                    <option value="" disabled selected>Select API Instance</option>
                    <option value="https://api.paradox.ai">PROD</option>
                    <option value="https://stgapi.paradox.ai">STG</option>
                    <option value="https://api.eu1.paradox.ai">EU PROD</option>
                    <option value="https://api.stg.eu1.paradox.ai">EU STG</option>
                    <option value="https://api.mchire.com">MCHIRE PROD</option>
                    <option value="https://stgapi.mchire.com">MCHIRE STG</option>
                    <option value="https://fedexapi.paradox.ai">FEDEX PROD</option>
                    <option value="https://lowesapi.paradox.ai">LOWES PROD</option>
                    <option value="https://api.sodexo.paradox.ai">SODEXO PROD</option>
                    <option value="https://dardenapi.paradox.ai">DARDEN PROD</option>
                    <option value="https://unileverapi.paradox.ai">UNILEVER</option>
                    <option value="https://lockheedapi.paradox.ai">LOCKHEED PROD</option>
                    <option value="https://aramarkapi.paradox.ai">ARAMARK PROD</option>
                    <option value="https://pepsiapi.paradox.ai">PEPSI PROD</option>
                    <option value="https://advantageapi.paradox.ai">ADVANTAGE PROD</option>
                    <option value="https://regisapi.paradox.ai">REGIS PROD</option>
                </select>
            </div>
        </div>

        <div class="row">
            <div class="input-field col s6">
                <label for="accountId">Account ID:</label>
                <input type="text" id="accountId">
            </div>
            <div class="input-field col s6">
                <label for="secretKey">Secret Key:</label>
                <input type="password" id="secretKey">
            </div>
        </div>

        <div class="row">
            <div class="input-field col s12">
                <label for="status">Status:</label>
                <input type="text" id="status">
            </div>
        </div>

        <div class="row">
                <div class="input-field col s12">
                    <label for="candidateIds">Candidate IDs (comma-separated):</label>
                    <textarea id="candidateIds" class="materialize-textarea"></textarea>
                </div>
            <div class="flex-container">
                <div class="input-field col s12" style="margin-top: 0;">
                    <input type="file" id="csvFile" accept=".csv">
                </div>
                    <button class="paradox-primary-btn grey-text text-lighten-5" onclick="uploadFile()">Upload</button>
            </div>
            <div class="check-box">
                <label>
                    <input type="checkbox" id="acknowledge" />
                    <span>This list has been confirmed by the client<span class="red-text text-accent-4">*</span></span>
                </label>
            </div>
        </div>

        <div class="row">
            <button disabled class="paradox-primary-btn grey-text text-lighten-5 right" id="submit-btn"
                onclick="startUpdate()">Update Status
            </button>
        </div>

        <div id="output-progress" class="output-container" style="display:none">
            <div class="flex-container">
                <p class="progress-text">Requests Sent: <span id="count">0</span></p> 
                <button id="stop" class="paradox-primary-btn grey-text text-lighten-5" onclick="stopRequest()">Stop</button>
            </div>
            <div id="output"></div>
        </div>
        
    </div>

    <script>
        M.AutoInit();
        let checkbox = document.getElementById('acknowledge');
        let btn = document.getElementById('submit-btn');
        checkbox.addEventListener('change', (e) => {
            let { checked } = checkbox
            checked ? btn.removeAttribute('disabled') : btn.setAttribute('disabled', true)
        })
    </script>
    
</body>

</html>